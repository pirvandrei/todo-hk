{"version":3,"sources":["components/Note.js","components/Notification.js","components/Footer.js","components/Togglable.js","components/LoginForm.js","components/NoteForm.js","services/notes.js","services/login.js","App.js","index.js"],"names":["Note","note","toggleImportance","label","important","className","content","onClick","Notification","message","type","Footer","style","color","fontStyle","fontSize","Togglable","React","forwardRef","props","ref","useState","visible","setVisible","hideWhenVisible","display","showWhenVisible","toggleVisibility","useImperativeHandle","buttonLabel","children","LoginForm","handleSubmit","username","setUsername","password","setPassword","onSubmit","event","preventDefault","value","onChange","target","NoteForm","createNote","newNote","setNewNote","date","Date","toISOString","Math","random","token","getAll","axios","get","then","response","data","create","newObject","a","config","headers","Authorization","post","update","id","put","setToken","newToken","login","credentials","App","notes","setNotes","showAll","setShowAll","errorMessage","setErrorMessage","setNotificationType","user","setUser","noteFormRef","useRef","togglable1","togglable2","togglable3","useEffect","noteService","initialNotes","loggedUserJSON","window","localStorage","getItem","JSON","parse","addNote","noteObject","current","returnedNote","concat","handleLogin","userObject","loginService","setItem","stringify","notesToShow","filter","name","map","i","key","find","n","changedNote","catch","error","setTimeout","toggleImportanceOf","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.92a11343.chunk.js","sourcesContent":["import React, { useState } from 'react'\r\n\r\nconst Note = ({ note, toggleImportance }) => {\r\n\r\n    const label = note.important\r\n        ? 'make not important' : 'make important'\r\n\r\n    return (\r\n        <li className='note' >\r\n            {note.content}\r\n\r\n            <button onClick={toggleImportance}>\r\n                {label}\r\n            </button>\r\n\r\n        </li>\r\n    )\r\n}\r\n\r\nexport default Note ","import React from 'react'\r\n\r\nconst Notification = ({ message, type }) => {\r\n  if (message === null) {\r\n    return null;\r\n  }\r\n\r\n  return <div className={type}>{message}</div>;\r\n};\r\n\r\nexport default Notification","import React from 'react'\r\n\r\nconst Footer = () => {\r\n  const footerStyle = {\r\n    color: 'green',\r\n    fontStyle: 'italic',\r\n    fontSize: 16\r\n  }\r\n\r\n  return (\r\n    <div style={footerStyle}>\r\n      <br />\r\n      <em>Note app, by Andrei</em>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Footer","import React, { useState, useImperativeHandle } from 'react';\r\n\r\nconst Togglable = React.forwardRef((props, ref) => {\r\n  const [visible, setVisible] = useState(false);\r\n\r\n  const hideWhenVisible = { display: visible ? 'none' : '' };\r\n  const showWhenVisible = { display: visible ? '' : 'none' };\r\n\r\n  const toggleVisibility = () => {\r\n    setVisible(!visible);\r\n  };\r\n\r\n  useImperativeHandle(ref, () => {\r\n    return {\r\n      toggleVisibility,\r\n    };\r\n  });\r\n\r\n  return (\r\n    <div>\r\n      <div style={hideWhenVisible}>\r\n        <button onClick={toggleVisibility}>{props.buttonLabel}</button>\r\n      </div>\r\n      <div style={showWhenVisible}>\r\n        {props.children}\r\n        <button onClick={toggleVisibility}>cancel</button>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default Togglable;\r\n","import React, { useState } from 'react';\r\n\r\nconst LoginForm = ({\r\n  handleSubmit,\r\n  // handleUsernameChange,\r\n  // handlePasswordChange,\r\n  // username,\r\n  // password,\r\n}) => {\r\n  const [username, setUsername] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  // const [user, setUser] = useState(null);\r\n\r\n  const handleUsernameChange = (event) => {\r\n    setUsername(event.target.value);\r\n  };\r\n\r\n  const handlePasswordChange = (event) => {\r\n    setPassword(event.target.value);\r\n  };\r\n\r\n  const createUser = (event) => {\r\n    event.preventDefault();\r\n\r\n    handleSubmit({\r\n      username,\r\n      password,\r\n    });\r\n\r\n    setUsername('');\r\n    setPassword('');\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h2>Login</h2>\r\n\r\n      <form onSubmit={createUser}>\r\n        <div>\r\n          username\r\n          <input value={username} onChange={handleUsernameChange} />\r\n        </div>\r\n        <div>\r\n          password\r\n          <input\r\n            type=\"password\"\r\n            value={password}\r\n            onChange={handlePasswordChange}\r\n          />\r\n        </div>\r\n        <button type=\"submit\">login</button>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LoginForm;\r\n","import React, { useState } from 'react';\r\n\r\nconst NoteForm = ({ createNote }) => {\r\n  const [newNote, setNewNote] = useState('');\r\n\r\n  const handleChange = (event) => {\r\n    setNewNote(event.target.value);\r\n  };\r\n\r\n  const addNote = (event) => {\r\n    event.preventDefault();\r\n    \r\n    createNote({\r\n      content: newNote,\r\n      date: new Date().toISOString(),\r\n      important: Math.random() > 0.5 \r\n    });\r\n\r\n    setNewNote('');\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h2>Create a new note</h2>\r\n\r\n      <form onSubmit={addNote}>\r\n        <input \r\n        value={newNote} \r\n        onChange={handleChange} \r\n        />\r\n        <button type=\"submit\">save</button>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NoteForm;","import axios from 'axios';\r\nconst baseUrl = '/api/notes';\r\n\r\nlet token = null;\r\n\r\nconst setToken = (newToken) => {\r\n  token = `bearer ${newToken}`;\r\n};\r\n\r\nconst get = (id) => {\r\n  const request = axios.get(`${baseUrl}/${id}`);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nconst create = async (newObject) => {\r\n  const config = { \r\n      headers: { Authorization: token } };\r\n  const response = await axios.post(baseUrl, newObject, config);\r\n  return response.data;\r\n};\r\n\r\nconst update = (id, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nexport default { getAll, create, update, setToken };\r\n","import axios from 'axios';\r\nconst baseUrl = '/api/login';\r\n\r\n\r\n\r\nconst login = async (credentials) => {\r\n  const response = await axios.post(baseUrl, credentials);\r\n  return response.data;\r\n};\r\n\r\nexport default { login };\r\n","import React, { useState, useEffect, useRef } from 'react';\nimport Note from './components/Note';\nimport Notification from './components/Notification';\nimport Footer from './components/Footer';\nimport Togglable from './components/Togglable';\nimport LoginForm from './components/LoginForm';\nimport NoteForm from './components/NoteForm';\nimport noteService from './services/notes';\nimport loginService from './services/login';\n\nconst App = () => {\n  const [loginVisible, setLoginVisible] = useState(false);\n\n  const [notes, setNotes] = useState([]);\n  const [showAll, setShowAll] = useState(true);\n  const [errorMessage, setErrorMessage] = useState('');\n  const [notificationType, setNotificationType] = useState('');\n  const [user, setUser] = useState(null);\n\n  const noteFormRef = useRef();\n  const togglable1 = useRef();\n  const togglable2 = useRef();\n  const togglable3 = useRef();\n\n  useEffect(() => {\n    noteService.getAll().then((initialNotes) => {\n      setNotes(initialNotes);\n    });\n  }, []);\n\n  useEffect(() => {\n    const loggedUserJSON = window.localStorage.getItem('loggedNoteappUser');\n    if (loggedUserJSON) {\n      const user = JSON.parse(loggedUserJSON);\n      setUser(user);\n      noteService.setToken(user.token);\n    }\n  }, []);\n\n  const addNote = (noteObject) => {\n    noteFormRef.current.toggleVisibility();\n\n    noteService.create(noteObject).then((returnedNote) => {\n      setNotes(notes.concat(returnedNote));\n    });\n  };\n\n  const toggleImportanceOf = (id) => {\n    const note = notes.find((n) => n.id === id);\n    const changedNote = { ...note, important: !note.important };\n\n    noteService\n      .update(id, changedNote)\n      .then((returnedNote) => {\n        setNotes(notes.map((note) => (note.id !== id ? note : returnedNote)));\n      })\n      .catch((error) => {\n        setErrorMessage(\n          `Note '${note.content}' was already removed from server`\n        );\n        setNotificationType('error');\n        setTimeout(() => {\n          setErrorMessage('');\n        }, 5000);\n\n        setNotes(notes.filter((n) => n.id !== id));\n      });\n  };\n\n  const handleLogin = async (userObject) => {\n    let username = userObject.username;\n    let password = userObject.password;\n\n    try {\n      const user = await loginService.login({\n        username,\n        password,\n      });\n\n      window.localStorage.setItem('loggedNoteappUser', JSON.stringify(user));\n\n      noteService.setToken(user.token);\n      setUser(user);\n    } catch (exception) {\n      // ...\n    }\n  };\n\n  const loginForm = () => {\n    return (\n      <Togglable buttonLabel=\"login\">\n        <LoginForm handleSubmit={handleLogin} />\n      </Togglable>\n    );\n  };\n\n  const noteForm = () => (\n    <Togglable buttonLabel=\"new note\" ref={noteFormRef}>\n      <NoteForm createNote={addNote} />\n    </Togglable>\n  );\n\n  const notesToShow = showAll ? notes : notes.filter((note) => note.important);\n\n  return (\n    <div>\n      <h1>Notes</h1>\n      <Notification message={errorMessage} />\n\n      {user === null ? (\n        loginForm()\n      ) : (\n        <div>\n          <p>{user.name} logged in</p>\n          {noteForm()}\n        </div>\n      )}\n\n      <div>\n        <button onClick={() => setShowAll(!showAll)}>\n          show {showAll ? 'important' : 'all'}\n        </button>\n      </div>\n      <ul>\n        {notesToShow.map((note, i) => (\n          <Note\n            key={i}\n            note={note}\n            toggleImportance={() => toggleImportanceOf(note.id)}\n          />\n        ))}\n      </ul>\n\n      <div>\n        <Togglable buttonLabel=\"1\" ref={togglable1}>\n          first\n        </Togglable>\n\n        <Togglable buttonLabel=\"2\" ref={togglable2}>\n          second\n        </Togglable>\n\n        <Togglable buttonLabel=\"3\" ref={togglable3}>\n          third\n        </Togglable>\n      </div>\n      <Footer />\n    </div>\n  );\n};\n\nexport default App;\n","import React, { useState } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App'\r\nimport './index.css';\r\n\r\nReactDOM.render(\r\n  <App />,\r\n  document.getElementById('root')\r\n);\r\n\r\n"],"sourceRoot":""}